<html>
<head>
    <meta charset="utf8">
    <title>websocket</title>
    <style>
        textarea{
            width:300px; 
            height:150px; 
            margin-bottom:8px;
        }
        #close, #reconnect{
            display: none;
        }
    </style>
</head>
<body>
    <textarea id="content"></textarea>
    <div style="width:300px;text-align:right">
        <button id="send">发送消息</button>
        <button id="close">关闭连接</button>
        <button id="reconnect">重连</button>
    </div>
    <script src="./client.js"/></script>
    <script>
        window.onload = function () {     
            var client = new WSConnect("ws://localhost:3000", "tonken1");
            client.init(data => {
                console.log(data);
            });
            var text = document.getElementById("content");
            var sendBtn = document.getElementById("send");
            var closeBtn = document.getElementById("close");
            var restBtn = document.getElementById("reconnect");
            sendBtn.addEventListener("click", function(){
                client.send(text.value);
            })
            closeBtn.addEventListener("click", function(){
                client.close();
            });
            restBtn.addEventListener("click", function(){

            });
        }
    </script>
</body>
</html>